<app-navbar *ngIf="!isLogin"></app-navbar>
<section id="companies-filter-search-page" class="py-14">
    <div class="container  flex flex-col gap-10">
        <app-filtering-words [activeEle]="'Companies'"></app-filtering-words>
        <div class="containing-all-under-part mx-auto flex gap-5">
            <div class="filter-section shadow-sm px-16 py-8 bg-white h-fit rounded-6">
              <div class="title global-line-bottom-border pb-5">
                <h6>Filter</h6>
              </div>
            <!-- parent.component.html -->
            <form [formGroup]="companyFilterForm"> 
              <div class="py-5 flex flex-col gap-5">
                <!-- Industry Filter -->
                <div class="flex flex-col gap-4">
                  <div class="flex justify-between items-center">
                    <div>
                      <label class="filter-main-label" for="">Industry</label>
                    </div>
                  </div>
                  <div class="flex items-center justify-start gap-5">
                    <div class="input d-flex w-100 w-full">
                      <select formControlName="industry" class="global-input w-full mb-2">
                        <option value="" selected disabled>Choose an Industry</option>
                        <option *ngFor="let i of industries" [value]="i.industry">{{i.industry}}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <!-- Company Size Filter -->
                <div class="flex flex-col gap-4">
                  <div class="flex justify-between items-center">
                    <div>
                      <label class="filter-main-label" for="companySize">Company size</label>
                    </div>
                  </div>
                  <app-expandable-list [items]="companySizeList" [initialCount]="5" [formControl]="companySizeControl"></app-expandable-list>
                </div>
                <div class="flex flex-col gap-4">
                  <div class="flex justify-between items-center">
                    <div>
                      <label class="filter-main-label" for="location">Location</label>
                    </div>
                  </div>
                  <app-expandable-list [items]="countriesList" [initialCount]="5" [formControl]="locationControl"></app-expandable-list>
                </div>
              </div>
            </form>
            </div>
            <!-- Search Results -->
            <div *ngIf="!isLoading && !searchPage.empty" class="search-term shadow-sm flex flex-col gap-7 rounded-6">
              <div *ngIf="!searchPage.empty" class="companies-term bg-white rounded-6">
                <div class="px-14 py-7">
                  <div class="title">
                    <h6>Companies</h6>
                  </div>
                  <div *ngFor="let company of companyList" class="companies-info">
                    <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                      <div class="card-avatar">
                        <img src="../../../../assets/imgs/Avatar (3).svg" alt="">
                      </div>
                      <div class="card-info flex flex-col gap-2">
                        <div class="flex gap-5 items-center justify-start">
                          <div class="company-title">
                            <p>{{company.name}}</p>
                          </div>
                        </div>
                        <div class="text ompany-tagline">
                          <p>{{company.tagline}}</p>
                        </div>
                        <div class="company-subscribes text">
                          <p>{{company.industry}}.</p>
                        </div>
                        <div>
                          <button class="people-location rounded-full flex items-center justify-center gap-3">
                            <img src="../../../../assets/imgs/location.svg" alt="">
                            <span>{{company.mainBranchLocation?.state}} - {{company.mainBranchLocation?.country}}</span>
                          </button>
                        </div>
                        <div class="company-rank items-center text flex gap-2">
                          <div>
                            <img [src]="company.profileImage !=null ?'../../../../assets/imgs/award (1).svg':company.profileImage" alt="">
                          </div>
                          <div>
                            <p>Rank on HirexHire</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="flex items-center justify-center pt-4 pb-8">
                  <button *ngIf="!searchPage.last" class="flex see-all items-center justify-center gap-3">
                    <span (click)="viewMore()">View More</span>
                    <img src="../../../../assets/imgs/Line arrow-right.svg" alt="">
                  </button>
                </div>
              </div>
            </div>
            <div *ngIf="isLoading" class="loader w-full">
              <div class="companies-term bg-white shadow-xl global-line-border">
                <div class="px-4 py-7">
                    <div class="title animate-pulse">
                        <div class="line title-line"></div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center global-line-top-border pt-4 pb-8">
                    <button class="flex see-all items-center justify-center gap-3 animate-pulse">
                        <span class="line wide"></span>
                        <div class="image-placeholder small"></div>
                    </button>
                </div>
            </div>
            </div>
            <div  *ngIf="!isLoading && searchPage.empty" class="not-found w-full"> 
              <h5>No results found for your search.</h5>
              <p>We couldn't find any matches for the keyword "<strong>{{keyword}}</strong>".</p>
            </div>
        </div>
    </div> 
</section>