<app-navbar *ngIf="!isLogin"></app-navbar>
<section *ngIf="isLoading " id="initial-search-page" class="py-14">
    <div class="container  flex flex-col gap-10">
        <div  class="loader">
            <div class="search-filtering-words bg-slate-100 animate-pulse bg-white flex flex-col gap-8 px-32 py-10">
                <div class="filtering-words-btn flex items-center justify-start gap-10 ps-5">
                    <div class="btn-placeholder animate-pulse"></div>
                    <div class="btn-placeholder animate-pulse"></div>
                    <div class="btn-placeholder animate-pulse"></div>
                </div>
            </div>
            <div class="companies-term bg-white shadow-xl global-line-border">
                <div class="px-14 py-7">
                    <div class="title animate-pulse">
                        <div class="line title-line"></div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="companies-info">
                        <div class="card search-card flex gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar animate-pulse">
                                <div class="image-placeholder p-4"></div>
                            </div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title animate-pulse">
                                        <div class="line wide"></div>
                                    </div>
                                </div>
                                <div class="text company-tagline animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="company-subscribes text animate-pulse">
                                    <div class="line wide"></div>
                                </div>
                                <div class="animate-pulse">
                                    <div class="line narrow"></div> 
                                </div>
                                <div class="company-rank items-center text flex gap-2 animate-pulse"> 
                                    <div class="line narrow"></div> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center global-line-top-border pt-4 pb-8">
                    <button class="flex see-all items-center justify-center gap-3 animate-pulse">
                        <span class="line wide"></span>
                        <div class="image-placeholder small"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<section *ngIf="!isLoading" id="initial-search-page" class="py-14">
    <div class="container  flex flex-col gap-10">
        <ng-container *ngIf="!(!isLoading && searchPage.jobSeekers.empty && searchPage.companies.empty && searchPage.jobPosts.empty)">
            <app-filtering-words [activeEle]="'company'"></app-filtering-words>
        </ng-container>
        <div *ngIf="!isLoading" class="search-term w-3/4 m-auto flex flex-col gap-7  ">
            <div *ngIf="!searchPage.jobPosts.empty" class="jobs-term bg-white shadow-sm  global-line-border">
                <div class="px-14 py-7">
                    <div class="title">
                        <h6>Jobs</h6>
                    </div>
                    <div  class="job-info">
                        <div saveJob *ngFor="let jobPost of searchPage.jobPosts.content" class="main-body search-card m-auto bg-white rounded-2xl px-16 py-8 flex flex-col gap-4">
                            <div (click)="viewDetails(jobPost.id)">
                                <div class="flex items-center justify-between ">
                                    <div class="flex flex-col items-start gap-2">
                                        <div class="flex items-center gap-4">
                                            <p class="job-title">{{jobPost.jobTitle}}</p>
                                            <p class="exp-level">{{jobPost.minExperienceYears}}-<span *ngIf="jobPost.maxExperienceYears>0">{{jobPost.maxExperienceYears}}</span> Year</p>
                                        </div>
                                        <div class="flex items-center gap-4">
                                            <p class="company-name">{{jobPost.company}}</p>
                                            <p class="company-name">-</p>
                                            <p class="company-location">{{jobPost.location}}</p> 
                                        </div>
                                        <div class="flex items-center gap-4"> 
                                            <p class="company-location">{{jobPost.employmentType}}</p>
                                            <p class="company-name">-</p>
                                            <p class="company-location">{{jobPost.jobType}}</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <img *ngIf="!jobPost.companyImageUrl" src="../../../assets/imgs/saved-jobs-avatar.svg" alt="">
                                        <img *ngIf="jobPost.companyImageUrl" [src]="jobPost.companyImageUrl " alt="">
                                    </div>
                                </div>
                                <div class="flex items-start gap-4">
                                    <p class="category">{{jobPost.industry}}</p> 
                                </div>
                                <div  class="mt-3 pb-10 border-b-2 flex flex-col gap-6">
                                    <div class="global-long-width flex flex-wrap items-center gap-4">
                                        <p *ngFor="let skill of jobPost.skills " class="Keyword flex items-center justify-center">#{{skill}}</p>
                                    </div> 
                                </div>
                            </div>
                            <div>
                                <button (click)="saveJobs(jobPost.id)" [class.active]="jobPost.saved" class="unsave-btn flex items-center justify-center gap-3"
                                  type="button">
                                  <i class="bookmark fa-solid fa-bookmark "></i>
                                  <span *ngIf="jobPost.saved">UnSaved</span><span *ngIf="!jobPost.saved"> Save</span>
                                </button>
                              </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center global-line-top-border  pt-4 pb-8">
                    <button class="flex see-all items-center justify-center gap-3"><span (click)="navigateToJobs()">see all</span><img src="../../../../assets/imgs/Line arrow-right.svg" alt=""> </button>
                </div>
            </div>
            <div *ngIf="!searchPage.companies.empty" class="companies-term bg-white shadow-sm  global-line-border">
                <div class="px-14 py-7">
                    <div class="title">
                        <h6>Companies</h6>
                    </div>
                    <div (click)="viewCompanyProfile(company.id)" *ngFor="let company of searchPage.companies.content" class="companies-info">
                        <div class="card search-card flex  gap-8 global-line-bottom-border p-8">
                            <div class="card-avatar"><img src="../../../../assets/imgs/Avatar (3).svg" alt=""></div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="company-title"><p>{{company.name}}</p></div>
                                </div>
                                <div class="text ompany-tagline">
                                    <p>{{company.tagline}}</p>
                                </div>
                                <div class="company-subscribes text"><p>{{company.industry}}.</p></div>
                                
                                <div class=""><button class="people-location rounded-full   flex items-center justify-center gap-3"><img src="../../../../assets/imgs/location.svg" alt=""> <span>{{company.mainBranchLocation?.state}} - {{company.mainBranchLocation?.country}}</span></button></div>
                                
                                <div class="company-rank items-center text flex gap-2">
                                    <div class=""><img [src]="company.profileImage !=null ?'../../../../assets/imgs/award (1).svg':company.profileImage" alt=""></div>
                                    <div class=""><p>Rank on HirexHire</p></div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center global-line-top-border  pt-4 pb-8">
                    <button class="flex see-all items-center justify-center gap-3"><span (click)="navigateToCompanies()">see all</span><img src="../../../../assets/imgs/Line arrow-right.svg" alt=""> </button>
                </div>
            </div>
            <div *ngIf="!searchPage.jobSeekers.empty" class="people-term bg-white shadow-sm  global-line-border">
                <div class="px-14 py-7">
                    <div class="title">
                        <h6>People</h6>
                    </div>
                    <div (click)="viewProfile(jobSeeker.id)" *ngFor="let jobSeeker of searchPage.jobSeekers.content" class="people-info">
                        <div class="card search-card flex  gap-8  items-start p-8">
                            <div class="card-avatar"><img src="../../../../assets/imgs/people avatar.svg" alt=""></div>
                            <div class="card-info flex flex-col gap-2">
                                <div class="flex gap-5 items-center justify-start">
                                    <div class="people-name"><p>{{jobSeeker.firstName}} {{jobSeeker.lastName}}</p></div>
                                    <div class="exp-level"><p>{{jobSeeker.jobStatus}}</p></div>
                                </div>
                                <div class="level-specialization text">
                                    <p>{{jobSeeker.careerLevel}} - {{jobSeeker.jobTitle}}</p>
                                </div>
                                <div class="people-university text">
                                    <p>{{jobSeeker.about}}</p>
                                </div>
                                <div class=""><button class="people-location rounded-full   flex items-center justify-center gap-3"><img src="../../../../assets/imgs/location.svg" alt=""> <span>{{jobSeeker.livesIn.state}} - {{jobSeeker.livesIn.country}}</span></button></div>
                            </div>
                        </div>

                        <div class=" "></div>
                    </div>
                </div>
                <div class="flex items-center justify-center global-line-top-border  pt-4 pb-8">
                    <button class="flex see-all items-center justify-center gap-3"><span (click)="navigateToPeople()">see all</span><img src="../../../../assets/imgs/Line arrow-right.svg" alt=""> </button>
                </div>
            </div>
        </div> 
        <div *ngIf="!isLoading && searchPage.jobSeekers.empty && searchPage.companies.empty && searchPage.jobPosts.empty" class="not-found"> 
            <h5>No results found for your search.</h5>
            <p>We couldn't find any matches for the keyword "<strong>{{keyword}}</strong>".</p>
        </div>
    </div> 
</section>
